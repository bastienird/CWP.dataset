% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compare_nominal_georef_corrected.R
\name{compare_nominal_georef_corrected}
\alias{compare_nominal_georef_corrected}
\title{Compare Nominal and Georeferenced Data}
\usage{
compare_nominal_georef_corrected(
  nominal,
  georef_mapped,
  list_strata = list(c("species", "year", "source_authority", "gear_type",
    "fishing_fleet", "geographic_identifier_nom"))
)
}
\arguments{
\item{nominal}{A data.table containing nominal data with measurement values.}

\item{georef_mapped}{A data.table containing georeferenced data with measurement values.}

\item{list_strata}{A list of character vectors specifying the grouping strata for comparison.
Default: list(c("species", "year", "source_authority", "gear_type", "fishing_fleet", "geographic_identifier_nom")).}
}
\value{
A list containing multiple comparison results, including:
\itemize{
\item \code{georef_no_nominal}: Strata present in georeferenced data but absent in nominal.
\item \code{georef_no_nominal_with_value}: Strata missing in nominal with their georeferenced measurement values.
\item \code{georef_tons_no_nominal}: Strata in tons missing from nominal data.
\item \code{georef_sup_nominal}: Strata where georeferenced data exceeds nominal data.
\item \code{tons_nei_nominal}: NEI strata in nominal data that could explain differences.
\item \code{tons_nei_georef}: NEI strata in georeferenced data that could explain differences.
\item \code{sum_georef_no_nominal}: Total measurement value of georeferenced data missing in nominal.
\item \code{suffisant}: Boolean indicating whether georeferenced data is sufficient to match nominal data.
\item \code{tons_aggregated_georef}: Measurement values of aggregated georeferenced strata.
\item \code{sum_georef_sup_nom}: Total excess of georeferenced data over nominal data.
}
}
\description{
This function compares nominal and georeferenced datasets, aggregating values by specified strata,
identifying mismatches, and analyzing differences in measurement values.
}
\details{
\itemize{
\item Converts both \code{nominal} and \code{georef_mapped} to \code{data.table} format.
\item Extracts \code{year} from \code{time_start} for both datasets.
\item Filters georeferenced data to retain only measurements in tons.
\item Aggregates measurement values by the provided strata.
\item Compares common and distinct strata between the datasets.
\item Evaluates the impact of \code{NEI} and aggregated species (\code{TUN}, \code{TUS}, \code{BIL}) on discrepancies.
}
}
\examples{
\dontrun{

nominal <- data.table(
  species = c("YFT", "BET"),
  year = c("2020", "2020"),
  source_authority = c("RFMO_A", "RFMO_B"),
  gear_type = c("03.1.0", "01.1.0"),
  fishing_fleet = c("Fleet_1", "Fleet_2"),
  geographic_identifier_nom = c("5100000", "5100001"),
  measurement_unit = c("t", "t"),
  measurement_value = c(100, 200)
)

georef_mapped <- data.table(
  species = c("YFT", "BET"),
  year = c("2020", "2020"),
  source_authority = c("RFMO_A", "RFMO_B"),
  gear_type = c("03.1.0", "01.1.0"),
  fishing_fleet = c("Fleet_1", "Fleet_2"),
  geographic_identifier_nom = c("5100000", "5100001"),
  measurement_unit = c("t", "t"),
  measurement_value = c(150, 180),
  time_start = as.Date(c("2020-01-01", "2020-01-01"))
)

result <- compare_nominal_georef_corrected(nominal, georef_mapped)
}

}
